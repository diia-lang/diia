<img src="./лого.svg" width="100" height="100" /> 

# Машина Мавки

Машина Мавки (МаМа) це віртуальна машина, що виконує вказівки Мавки.

МаМа використовує накопичувачі (один загальний й допоміжні) і тримачі (наразі лише один).

МаМа має механізм автоматичної утилізації більше не потрібних обʼєктів для звільнення памʼяті.

100% Машини Мавки написано мовою [Ціль](https://ціль.укр).

## Приклад

```ціль
взяти визначення МаМа;

дія нативна_дія_друк(...) {
  // ...
}

дія старт(): ц32 {
  ціль М = МаМа::виділити_машину();
  
  ціль назва_друк = МаМа::назва(М, ю8"друк");
  ціль нативна_дія_друк = МаМа::виділити_обʼєкт_нативної_дії(М, назва_друк, нативна_дія_друк);
  МаМа::змінити_в_середовищі(М, М.глобальне_середовище, назва_друк, нативна_дія_друк);

  ціль позиція_коду = МаМа::покласти_новий_код(М);
  ціль код = МаМа::отримати_код(М, позиція_коду);
  // 3.14
  ціль обʼєкт_числа_ПІ = МаМа::виділити_обʼєкт_числа(М, 3.14);
  ціль позиція_константи = МаМа::покласти_константу(М, обʼєкт_числа_ПІ);
  // ПІ = 3.14
  МаМа::покласти_вказівку_ПокластиКонстанту(М, код, позиція_константи);
  ціль позиція_назви_ПІ = МаМа::покласти_назву_з_ю8(М, ю8"ПІ");
  МаМа::покласти_вказівку_Визначити(М, код, позиція_назви_ПІ);
  // друк(ПІ)
  ціль позиція_назви_друк = МаМа::позиція_назви(М, ю8"друк");
  МаМа::покласти_вказівку_Звернутись(М, код, позиція_назви_друк);
  МаМа::покласти_вказівку_Звернутись(М, код, позиція_назви_ПІ);
  МаМа::покласти_вказівку_Виконати(М, код, 1);
  
  ціль середовище_виконання = МаМа::виділити_середовище(М, М.глобальне_середовище);
  МаМа::покласти_середовище_виконання_в_історію(М, середовище_виконання);
  ціль результат_виконання_коду = МаМа::виконати_код(М, код);
  МаМа::забрати_середовище_виконання_з_історії(М);
  якщо М.стан_падіння {
    // обробка помилки
  } інакше {
    // обробка результату
  }
  
  вернути 0;
}
```

## Деталі

- [МаМа.в](./МаМа.в)
- [https://мавка.укр](https://мавка.укр)