////
// Автор це Богданович Давид Когут Прихожденко та Організація Мавки та Організація Організацій
////

взяти визначення МаМа;
взяти визначення мавка/розбирач;

секція мавка {
  структура Обʼєкт; // те саме що МаМа::Обʼєкт
  структура Середовище;  // те саме що МаМа::Середовище
  структура Назва;  // те саме що МаМа::Назва
  структура МісцезнаходженняПадіння; // те саме що МаМа::МісцезнаходженняПадіння

  структура Результат;
  структура Помилка;
  структура Виконувач;
}

секція мавка {
  структура Результат {
    успіх: логічне;
    значення: адреса<Обʼєкт>;
    місцезнаходження_падіння: адреса<МісцезнаходженняПадіння>;
  }

  структура Виконувач {
    М: адреса<МаМа::Машина>;
  }
}

// Публічні дії, що можна вільно використовувати.
секція мавка {
  синонім НативнаДія = (обʼєкт_нативної_дії: адреса<Обʼєкт>, В: адреса<Виконувач>, обʼєкт_я: адреса<Обʼєкт>, аргументи: адреса<Накопичувач<адреса<Обʼєкт>>>, іменовані_аргументи: адреса<Реєстр<адреса<Назва>, адреса<Обʼєкт>>>) -> Результат;
  синонім ВідкликПередЗвільненнямОбʼєктаНативноїДії = (обʼєкт_нативної_дії: адреса<Обʼєкт>, В: адреса<Виконувач>) -> ніщо;

  місцева дія створити_виконувач(): адреса<Виконувач>;
  місцева дія знищити_виконувач(В: адреса<Виконувач>);
  місцева дія почати_діалог(В: адреса<Виконувач>, середовище: адреса<Середовище>): Результат;
  місцева дія створити_нативну_дію(В: адреса<Виконувач>, назва: Ю8, значення: НативнаДія): Результат;
  місцева дія створити_число(В: адреса<Виконувач>, значення: д64): Результат;
  місцева дія створити_текст(В: адреса<Виконувач>, значення: Ю8): Результат;
  місцева дія створити_обʼєкт(В: адреса<Виконувач>): Результат;
  місцева дія отримати_властивість(обʼєкт: адреса<Обʼєкт>, В: адреса<Виконувач>, назва: Ю8): Результат;
  місцева дія змінити_властивість(обʼєкт: адреса<Обʼєкт>, В: адреса<Виконувач>, назва: Ю8, значення: адреса<Обʼєкт>): Результат;
  місцева дія виконати_властивість(обʼєкт: адреса<Обʼєкт>, В: адреса<Виконувач>, назва: Ю8, аргументи: Накопичувач<адреса<Обʼєкт>>): Результат;
  місцева дія виконати_обʼєкт(обʼєкт: адреса<Обʼєкт>, В: адреса<Виконувач>, аргументи: Накопичувач<адреса<Обʼєкт>>): Результат;
  місцева дія покласти_тимчасове_середовище(В: адреса<Виконувач>): адреса<Середовище>;
  місцева дія забрати_тимчасове_середовище(В: адреса<Виконувач>);
  місцева дія визначити(В: адреса<Виконувач>, середовище: адреса<Середовище>, назва: Ю8, обʼєкт: адреса<Обʼєкт>): Результат;
  місцева дія звернутись(В: адреса<Виконувач>, середовище: адреса<Середовище>, назва: Ю8): адреса<Обʼєкт>;
  місцева дія визначити_нативну_дію(В: адреса<Виконувач>, середовище: адреса<Середовище>, назва: Ю8, значення: НативнаДія): Результат;
  місцева дія визначити_число(В: адреса<Виконувач>, назва: Ю8, значення: д64): Результат;
  місцева дія визначити_текст(В: адреса<Виконувач>, назва: Ю8, значення: Ю8): Результат;
  місцева дія взяти_модуль(В: адреса<Виконувач>, назва: Ю8): Результат;
  місцева дія виконати_ю8(В: адреса<Виконувач>, значення: Ю8): Результат;
  місцева дія результат_успіх(обʼєкт: адреса<Обʼєкт>): Результат;
  місцева дія результат_падіння(обʼєкт: адреса<Обʼєкт>, місцезнаходження_падіння: адреса<МісцезнаходженняПадіння>): Результат;
  місцева дія отримати_глобальне_середовище(В: адреса<Виконувач>): адреса<Середовище>;
}

// Приватні дії, які не варто рухати.
секція мавка {
  структура ПомилкаКомпіляції;
  структура КонтекстКомпіляції;

  структура ПомилкаКомпіляції {
    повідомлення: Ю8;
    місцезнаходження: адреса<Місцезнаходження>;
  }

  місцева дія виділити_помилку_компіляції(): адреса<ПомилкаКомпіляції>;

  структура КонтекстКомпіляції {
    код_дії: адреса<МаМа::Код>;
  }

  місцева дія виділити_контекст_компіляції(): адреса<КонтекстКомпіляції>;
  місцева дія звільнити_контекст_компіляції(контекст: адреса<КонтекстКомпіляції>);

  місцева дія скомпілювати_елемент_значення(М: адреса<МаМа::Машина>, контекст: адреса<КонтекстКомпіляції>, код: адреса<МаМа::Код>, елемент: адреса<АСДЗначення>): адреса<ПомилкаКомпіляції>;
  місцева дія скомпілювати_тіло(М: адреса<МаМа::Машина>, контекст: адреса<КонтекстКомпіляції>, код: адреса<МаМа::Код>, тіло: адреса<СписокАСДЗначень>): адреса<ПомилкаКомпіляції>;
}