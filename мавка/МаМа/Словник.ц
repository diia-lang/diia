взяти визначення МаМа;

секція мама {
  дія нативна_дія_перебору_словника_далі(М: комірка<Машина>, місцезнаходження: комірка<Місцезнаходження>, обʼєкт_нативної_дії: комірка<Обʼєкт>, аргументи: комірка<вектор<Аргумент>>): Результат {
    ціль обʼєкт_перебору = обʼєкт_нативної_дії.дія_я;
    ціль обʼєкт_словника = обʼєкт_перебору.перебір_словника_словник;
    ціль позиція = обʼєкт_перебору.перебір_словника_позиція;
    якщо позиція >= обʼєкт_словника.словник_елементи.елементи.довжина {
      вернути результат_значення(Значення { ЗНі });
    }
    ціль значення = обʼєкт_словника.словник_елементи.елементи.дані[позиція].ключ;
    змінити_властивість_обʼєкта(обʼєкт_перебору, отримати_або_створити_слово(М, ю8"значення"), значення);
    обʼєкт_перебору.перебір_словника_позиція = позиція + 1;
    вернути результат_значення(Значення { ЗТак });
  }

  дія нативна_дія_вернути_дія_я(М: комірка<Машина>, місцезнаходження: комірка<Місцезнаходження>, обʼєкт_нативної_дії: комірка<Обʼєкт>, аргументи: комірка<вектор<Аргумент>>): Результат {
    якщо обʼєкт_нативної_дії.дія_я == пусто {
      вернути результат_значення(Значення { ЗПусто });
    }
    вернути результат_значення(Значення { ЗОбʼєкт, дані = обʼєкт_нативної_дії.дія_я });
  }

  дія нативна_дія_методу_структури_словник_чародія_перебір(М: комірка<Машина>, місцезнаходження: комірка<Місцезнаходження>, обʼєкт_нативної_дії: комірка<Обʼєкт>, аргументи: комірка<вектор<Аргумент>>): Результат {
    ціль обʼєкт_перебору = створити_обʼєкт(М, ОПеребірСловника);
    обʼєкт_перебору.с = М.структура_перебір;
    ціль обʼєкт_нативної_дії_вернути_дія_я = створити_обʼєкт_нативна_дія(М, нативна_дія_вернути_дія_я);
    обʼєкт_нативної_дії_вернути_дія_я.дія_я = обʼєкт_перебору;
    змінити_властивість_обʼєкта(обʼєкт_перебору, отримати_або_створити_слово(М, ю8"чародія_перебір"), Значення { ЗОбʼєкт, дані = обʼєкт_нативної_дії_вернути_дія_я });
    обʼєкт_перебору.перебір_словника_словник = обʼєкт_нативної_дії.дія_я;
    обʼєкт_перебору.перебір_словника_позиція = 0;
    ціль обʼєкт_нативної_дії_далі = створити_обʼєкт_нативна_дія(М, нативна_дія_перебору_словника_далі);
    обʼєкт_нативної_дії_далі.дія_слово = отримати_або_створити_слово(М, ю8"далі");
    обʼєкт_нативної_дії_далі.дія_я = обʼєкт_перебору;
    змінити_властивість_обʼєкта(обʼєкт_перебору, отримати_або_створити_слово(М, ю8"далі"), Значення { ЗОбʼєкт, дані = обʼєкт_нативної_дії_далі });
    вернути результат_значення(Значення { ЗОбʼєкт, дані = обʼєкт_перебору });
  }

  дія обʼєкт_словника_отримати_властивість_дія(М: комірка<Машина>, місцезнаходження: комірка<Місцезнаходження>, обʼєкт: комірка<Обʼєкт>, слово_назви: комірка<Слово>): Результат {
    якщо слово_назви == М.база_слів.розмір {
      вернути результат_значення(Значення { ЗЧисло, дані = обʼєкт.словник_елементи.елементи.довжина як дійсне });
    }
    вернути обʼєкт_отримати_властивість_дія(М, місцезнаходження, обʼєкт, слово_назви);
  }

  дія нативна_дія_методу_структури_словник_чародія_отримати(М: комірка<Машина>, місцезнаходження: комірка<Місцезнаходження>, обʼєкт_нативної_дії: комірка<Обʼєкт>, аргументи: комірка<вектор<Аргумент>>): Результат {
    якщо аргументи.довжина != 1 {
      вернути результат_значення(Значення { ЗПусто });
    }
    ціль значення_першого_аргументу = аргументи.дані[0].значення;
    ціль обʼєкт_словника = обʼєкт_нативної_дії.дія_я;
    ціль значення = отримати_значення_з_карти<Значення, Значення>(обʼєкт_словника.словник_елементи, значення_першого_аргументу, Значення { ЗПусто });
    вернути результат_значення(значення);
  }

  дія нативна_дія_методу_структури_словник_чародія_покласти(М: комірка<Машина>, місцезнаходження: комірка<Місцезнаходження>, обʼєкт_нативної_дії: комірка<Обʼєкт>, аргументи: комірка<вектор<Аргумент>>): Результат {
    якщо аргументи.довжина != 2 {
      вернути результат_значення(Значення { ЗПусто });
    }
    ціль значення_першого_аргументу = аргументи.дані[0].значення;
    ціль значення_другого_аргументу = аргументи.дані[1].значення;
    ціль обʼєкт_словника = обʼєкт_нативної_дії.дія_я;
    змінити_значення_карти<Значення, Значення>(обʼєкт_словника.словник_елементи, значення_першого_аргументу, значення_другого_аргументу);
    вернути результат_значення(значення_другого_аргументу);
  }

  дія нативна_дія_методу_структури_словник_чародія_містить(М: комірка<Машина>, місцезнаходження: комірка<Місцезнаходження>, обʼєкт_нативної_дії: комірка<Обʼєкт>, аргументи: комірка<вектор<Аргумент>>): Результат {
    якщо аргументи.довжина != 1 {
      вернути результат_значення(Значення { ЗПусто });
    }
    ціль значення_першого_аргументу = аргументи.дані[0].значення;
    ціль обʼєкт_словника = обʼєкт_нативної_дії.дія_я;
    якщо перевірити_чи_карта_містить_значення<Значення, Значення>(обʼєкт_словника.словник_елементи, значення_першого_аргументу) == 0 {
      вернути результат_значення(Значення { ЗНі });
    }
    вернути результат_значення(Значення { ЗТак });
  }

  дія нативна_дія_методу_структури_словник_визначення(М: комірка<Машина>, місцезнаходження: комірка<Місцезнаходження>, обʼєкт_нативної_дії: комірка<Обʼєкт>, аргументи: комірка<вектор<Аргумент>>): Результат {
    ціль обʼєкт_словника = обʼєкт_нативної_дії.дія_я;
    ціль обʼєкт_списку = створити_обʼєкт_список(М);
    змінна х = 0ц32;
    поки х < обʼєкт_словника.словник_елементи.елементи.довжина як ц32 {
      ціль значення = обʼєкт_словника.словник_елементи.елементи.дані[х].ключ;
      додати_до_вектору<Значення>(обʼєкт_списку.список_елементи, значення);
      х = х + 1;
    }
    вернути результат_значення(Значення { ЗОбʼєкт, дані = обʼєкт_списку });
  }

  дія нативна_дія_методу_структури_словник_значення(М: комірка<Машина>, місцезнаходження: комірка<Місцезнаходження>, обʼєкт_нативної_дії: комірка<Обʼєкт>, аргументи: комірка<вектор<Аргумент>>): Результат {
    ціль обʼєкт_словника = обʼєкт_нативної_дії.дія_я;
    ціль обʼєкт_списку = створити_обʼєкт_список(М);
    змінна х = 0ц32;
    поки х < обʼєкт_словника.словник_елементи.елементи.довжина як ц32 {
      ціль значення = обʼєкт_словника.словник_елементи.елементи.дані[х].значення;
      додати_до_вектору<Значення>(обʼєкт_списку.список_елементи, значення);
      х = х + 1;
    }
    вернути результат_значення(Значення { ЗОбʼєкт, дані = обʼєкт_списку });
  }

  дія нативна_дія_методу_структури_словник_видалити(М: комірка<Машина>, місцезнаходження: комірка<Місцезнаходження>, обʼєкт_нативної_дії: комірка<Обʼєкт>, аргументи: комірка<вектор<Аргумент>>): Результат {
    якщо аргументи.довжина != 1 {
      вернути результат_значення(Значення { ЗПусто });
    }
    ціль значення_першого_аргументу = аргументи.дані[0].значення;
    ціль обʼєкт_словника = обʼєкт_нативної_дії.дія_я;
    якщо видалити_з_карти<Значення, Значення>(обʼєкт_словника.словник_елементи, значення_першого_аргументу) == 0 {
      вернути результат_значення(Значення { ЗНі });
    }
    вернути результат_значення(Значення { ЗТак });
  }

  дія нативна_дія_методу_структури_словник_очистити(М: комірка<Машина>, місцезнаходження: комірка<Місцезнаходження>, обʼєкт_нативної_дії: комірка<Обʼєкт>, аргументи: комірка<вектор<Аргумент>>): Результат {
    ціль обʼєкт_словника = обʼєкт_нативної_дії.дія_я;
    обʼєкт_словника.словник_елементи.елементи.довжина = 0;
    вернути результат_значення(Значення { ЗТак });
  }

  дія обʼєкт_словника_змінити_властивість_дія(М: комірка<Машина>, місцезнаходження: комірка<Місцезнаходження>, обʼєкт: комірка<Обʼєкт>, слово_назви: комірка<Слово>, значення: Значення): Результат {
    вернути результат_помилка_обʼєкт(створити_помилку_П2_неможливо_змінити_властивість(М, місцезнаходження, слово_назви, Значення { ЗОбʼєкт, дані = обʼєкт }));
  }

  місцева дія створити_обʼєкт_словник(М: комірка<Машина>): комірка<Обʼєкт> {
    ціль обʼєкт_словника = створити_обʼєкт(М, ОСловник);
    обʼєкт_словника.с = М.структура_словник;
    обʼєкт_словника.отримати_властивість = обʼєкт_словника_отримати_властивість_дія;
    обʼєкт_словника.змінити_властивість = обʼєкт_словника_змінити_властивість_дія;
    обʼєкт_словника.словник_елементи = створити_карту<Значення, Значення>(порівняти_значення);
    вернути обʼєкт_словника;
  }

  дія структура_словник_виконати_дія(М: комірка<Машина>, місцезнаходження: комірка<Місцезнаходження>, обʼєкт: комірка<Обʼєкт>, аргументи: комірка<вектор<Аргумент>>): Результат {
    якщо аргументи.довжина < 1 {
      вернути результат_помилка_обʼєкт(створити_помилку_П21_неможливо_виконати(М, місцезнаходження, Значення { ЗОбʼєкт, дані = обʼєкт }));
    }
    ціль значення_першого_аргумента = аргументи.дані[0].значення;
    якщо значення_першого_аргумента.тип == ЗОбʼєкт {
      ціль обʼєкт_значення_першого_аргумента = значення_першого_аргумента.дані як комірка<Обʼєкт>;
      якщо обʼєкт_значення_першого_аргумента.тип == ОСписок {
        вернути результат_значення(значення_першого_аргумента);
      }
      ціль результат_отримання_чародії_словник = обʼєкт_значення_першого_аргумента.отримати_властивість(М, місцезнаходження, обʼєкт_значення_першого_аргумента, отримати_або_створити_слово(М, ю8"чародія_словник"));
      якщо результат_отримання_чародії_словник.успіх == 0 {
        вернути результат_отримання_чародії_словник;
      }
      вернути машина_виконати_дію(М, місцезнаходження, результат_отримання_чародії_словник.значення, 0);
    }
    вернути результат_помилка_обʼєкт(створити_помилку_П21_неможливо_виконати(М, місцезнаходження, Значення { ЗОбʼєкт, дані = обʼєкт }));
  }

  місцева дія створити_структуру_словник(М: комірка<Машина>): комірка<Обʼєкт> {
    ціль слово = отримати_або_створити_слово(М, ю8"словник");
    ціль обʼєкт_структури = створити_обʼєкт_структура(М, слово, М.структура_обʼєкт);
    обʼєкт_структури.виконати_як_дію = структура_словник_виконати_дія;
    ціль обʼєкт_нативної_дії_чародія_перебір = зробити_безсмертним(М, створити_обʼєкт_нативна_дія(М, нативна_дія_методу_структури_словник_чародія_перебір));
    обʼєкт_нативної_дії_чародія_перебір.дія_слово = отримати_або_створити_слово(М, ю8"чародія_перебір");
    змінити_значення_карти<комірка<Слово>, комірка<Обʼєкт>>(обʼєкт_структури.структура_методи, отримати_або_створити_слово(М, ю8"чародія_перебір"), обʼєкт_нативної_дії_чародія_перебір);
    ціль обʼєкт_нативної_дії_чародія_отримати = зробити_безсмертним(М, створити_обʼєкт_нативна_дія(М, нативна_дія_методу_структури_словник_чародія_отримати));
    обʼєкт_нативної_дії_чародія_отримати.дія_слово = отримати_або_створити_слово(М, ю8"чародія_отримати");
    змінити_значення_карти<комірка<Слово>, комірка<Обʼєкт>>(обʼєкт_структури.структура_методи, отримати_або_створити_слово(М, ю8"чародія_отримати"), обʼєкт_нативної_дії_чародія_отримати);
    ціль обʼєкт_нативної_дії_чародія_покласти = зробити_безсмертним(М, створити_обʼєкт_нативна_дія(М, нативна_дія_методу_структури_словник_чародія_покласти));
    обʼєкт_нативної_дії_чародія_покласти.дія_слово = отримати_або_створити_слово(М, ю8"чародія_покласти");
    змінити_значення_карти<комірка<Слово>, комірка<Обʼєкт>>(обʼєкт_структури.структура_методи, отримати_або_створити_слово(М, ю8"чародія_покласти"), обʼєкт_нативної_дії_чародія_покласти);
    ціль обʼєкт_нативної_дії_чародія_містить = зробити_безсмертним(М, створити_обʼєкт_нативна_дія(М, нативна_дія_методу_структури_словник_чародія_містить));
    обʼєкт_нативної_дії_чародія_містить.дія_слово = отримати_або_створити_слово(М, ю8"чародія_містить");
    змінити_значення_карти<комірка<Слово>, комірка<Обʼєкт>>(обʼєкт_структури.структура_методи, отримати_або_створити_слово(М, ю8"чародія_містить"), обʼєкт_нативної_дії_чародія_містить);
    ціль обʼєкт_нативної_дії_визначення = зробити_безсмертним(М, створити_обʼєкт_нативна_дія(М, нативна_дія_методу_структури_словник_визначення));
    обʼєкт_нативної_дії_визначення.дія_слово = отримати_або_створити_слово(М, ю8"визначення");
    змінити_значення_карти<комірка<Слово>, комірка<Обʼєкт>>(обʼєкт_структури.структура_методи, отримати_або_створити_слово(М, ю8"визначення"), обʼєкт_нативної_дії_визначення);
    ціль обʼєкт_нативної_дії_значення = зробити_безсмертним(М, створити_обʼєкт_нативна_дія(М, нативна_дія_методу_структури_словник_значення));
    обʼєкт_нативної_дії_значення.дія_слово = отримати_або_створити_слово(М, ю8"значення");
    змінити_значення_карти<комірка<Слово>, комірка<Обʼєкт>>(обʼєкт_структури.структура_методи, отримати_або_створити_слово(М, ю8"значення"), обʼєкт_нативної_дії_значення);
    ціль обʼєкт_нативної_дії_видалити = зробити_безсмертним(М, створити_обʼєкт_нативна_дія(М, нативна_дія_методу_структури_словник_видалити));
    обʼєкт_нативної_дії_видалити.дія_слово = отримати_або_створити_слово(М, ю8"видалити");
    змінити_значення_карти<комірка<Слово>, комірка<Обʼєкт>>(обʼєкт_структури.структура_методи, отримати_або_створити_слово(М, ю8"видалити"), обʼєкт_нативної_дії_видалити);
    ціль обʼєкт_нативної_дії_очистити = зробити_безсмертним(М, створити_обʼєкт_нативна_дія(М, нативна_дія_методу_структури_словник_очистити));
    обʼєкт_нативної_дії_очистити.дія_слово = отримати_або_створити_слово(М, ю8"очистити");
    змінити_значення_карти<комірка<Слово>, комірка<Обʼєкт>>(обʼєкт_структури.структура_методи, отримати_або_створити_слово(М, ю8"очистити"), обʼєкт_нативної_дії_очистити);
    вернути зробити_безсмертним(М, обʼєкт_структури);
  }
}